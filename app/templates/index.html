<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Recommender</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header>
        <h1>Restaurant Recommender</h1>
    </header>
    <main>
        <form action="/recommend" method="post">
            <div class="form-group">
                <label for="foodTypes">Select your food type:</label>
                <select name="foodTypes" id="foodTypes" class="form-control">
                    <option value="American">American</option>
                    <option value="Italian">Italian</option>
                    <option value="Mexican">Mexican</option>
                    <option value="Asian">Asian</option>
                    <option value="Seafood">Seafood</option>
                    <option value="Fast Food">Fast Food</option>
                    <option value="Sandwiches & Deli">Sandwiches & Deli</option>
                    <option value="Pizza">Pizza</option>
                    <option value="Steak & BBQ">Steak & BBQ</option>
                    <option value="Other International">Other International</option>
                    <option value="Other">Other</option>
                </select>
                
                <!-- Side dropdown for refined options -->
                <div id="refinedOptions" class="refined-options">
                    <!-- Options will be populated using JavaScript -->
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary">Recommend</button>
        </form>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#foodTypes').select2({
                placeholder: "Search for food types",
                allowClear: true
            });

            // Define the refined options
            var refinedOptions = {
                'American': ['American', 'Bar', 'Burgers', 'BBQ', 'Sports Bar', 'Burger', 'New American', 'Cheesecake', 'Diner', 'Grill', 'Southern'],
                'Italian': ['Italian', 'Mediterranean', 'Greek', 'Pizza', 'Pasta', 'Deli'],
                'Mexican': ['Mexican', 'Fast Food', 'Sports Bar', 'Seafood', 'Asian', 'Salvadoran', 'Grill', 'Exotic', 'Fine Dining', 'Family-friendly'],
                'Asian': ['Thai', 'Ramen', 'Seafood', 'Buffet', 'Vietnamese', 'Korean', 'Japanese', 'Chinese'],
                'Seafood': ['Seafood', 'Steak', 'Sushi'],
                'Fast Food': ['Fast Food', 'Chicken Sandwiches', 'Burgers', 'Sandwiches'],
                'Sandwiches & Deli': ['Takeout', 'Cafe', 'Bakery', 'Sandwich'],
                'Pizza': ['Pizza'],
                'Steak & BBQ': ['Steak', 'Sushi', 'Burgers'],
                'Other International': ['Eastern European', 'Pan-European', 'French', 'Jamaican', 'Dominican', 'Bangladeshi', 'Barbeque', 'African', 'Colombian', 'Wings', 'Indian', 'Exotic', 'Brunch', 'Sports Bar', 'Restaurant', 'Fine Dining'],
                'Other': ['Bar', 'Chicken', 'New American', 'Exotic', 'Brunch', 'Family-friendly', 'Sports Bar', 'Restaurant', 'French', 'Grill']
            };

            // Display the refined options side dropdown when hovering over or clicking on an option
            $('#foodTypes').on('select2:open', function(e) {
                var $dropdown = $('<select id="refinedOptionsDropdown" class="form-control"></select>');
                var selectedOption = $(e.target).val();
                var options = refinedOptions[selectedOption] || [];
                
                for (var i = 0; i < options.length; i++) {
                    $dropdown.append($('<option>', {
                        value: options[i],
                        text: options[i]
                    }));
                }

                $dropdown.select2({
                    placeholder: "Search for refined food types",
                    allowClear: true
                });

                $dropdown.on('select2:select', function(e) {
                    $('#foodTypes').val(e.params.data.text).trigger('change');
                });

                $('.refined-options').html($dropdown);
            });
        });
    </script>
    
    <style>
        .refined-options {
            position: relative;
            display: inline-block;
            margin-left: 20px;
        }

        #refinedOptionsDropdown {
            width: 200px;
            z-index: 9999;
        }
    </style>
</body>
</html>
